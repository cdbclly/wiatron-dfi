<div>
  {{ 'mrr.nudd-recomYieldEval' | translate }}
  <div class="mrr-btn-download">
    <button nz-button [nzType]="'primary'" title="Notice" nzShape="circle" (click)="notice()">
      <i class="anticon anticon-notification"></i>
    </button>
    <button nz-button [nzType]="'primary'" title="Download" nzShape="circle" (click)="download()">
      <i class="anticon anticon-download"></i>
    </button>
  </div>
</div>
<br>
<div class="result">
  <nz-table id="downdata" #nzTable [nzData]="form" nzShowPagination="false" [nzPageSize]="500">
    <thead>
      <tr>
        <th style="width: 15%">Key Parts</th>
        <th style="width: 45%">Critical Process</th>
        <th style="width: 15%">Yield</th>
      </tr>
    </thead>
    <tbody *ngFor="let data of form,  index as i">
      <tr *ngIf="data.operation.length != 0">
        <td [attr.rowspan]="data.operation.length + 2">{{data.part.name}}</td>
        <td>{{data.material.desc}}
          <span *ngIf="data.material.desc === 'Other'"><a hidden="true">{{data.material.remark}}</a></span>
          <input nz-input *ngIf="data.material.desc === 'Other'" [(ngModel)]="data.material.remark"
            placeholder="Remarks" nzSize="default" class="otherInput">
        </td>
        <td>{{data.material.yieldRate * 100}}%</td>
      </tr>
      <tr *ngFor="let item of data.operation">
        <td>{{item.name}}
          <span *ngIf="item.name === 'Other'"><a hidden="true">{{item.remark}}</a></span>
          <input nz-input *ngIf="item.name === 'Other'" [(ngModel)]="item.remark" placeholder="Remarks" nzSize="default"
            class="otherInput">
        </td>
        <td>{{item.yieldRate * 100}}%</td>
      </tr>
      <tr *ngIf="data.operation.length != 0">
        <td style="background: #F5C910">{{ 'mrr.nudd-throughRate' | translate }}(%)</td>
        <td style="background: #F5C910">{{(getThroughRate(i) * 100).toFixed(2)}}%</td>
      </tr>
    </tbody>
  </nz-table>
</div>
<br>